@using Microsoft.AspNetCore.Identity
@using PersonalMoney.Models
@using Microsoft.EntityFrameworkCore
@inject SignInManager<User> SignInManager
@inject UserManager<User> UserManager
@inject PersonalMoneyContext dbContext
@*
For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@

<header class="header-desktop2">
    <div class="section__content section__content--p30">
        <div class="container-fluid">
            <div class="header-wrap2 justify-content-between">
                @if (dbContext != null)
                {
                    var wallets = dbContext.Wallets.ToList();
                    if (wallets.Any())
                    {
                        <select id="slcWallet" onchange="selectWallet()" class="form-select">
                            <option selected>Choose Wallets</option>
                            @foreach (var wallet in wallets)
                            {
                                <option value="@wallet.Id">@wallet.Name</option>
                            }
                        </select>
                    }
                    else
                    {
                        <p>No wallets available.</p>
                    }
                }
                }
                <div class="logo d-block d-lg-none">
                    <a href="#">
                        <img src="images/icon/logo-white.png" alt="CoolAdmin" />
                    </a>
                </div>
                <div class="header-button2">
                    <div class="header-button-item js-item-menu">
                        <i class="zmdi zmdi-search"></i>
                        <div class="search-dropdown js-dropdown">
                            <form action="">
                                <input class="au-input au-input--full au-input--h65" type="text"
                                       placeholder="Search for datas &amp; reports..." />
                                <span class="search-dropdown__icon">
                                    <i class="zmdi zmdi-search"></i>
                                </span>
                            </form>
                        </div>
                    </div>
                    <div class="header-button-item has-noti js-item-menu">
                        <i class="zmdi zmdi-notifications"></i>
                        <div class="notifi-dropdown js-dropdown">
                            <div class="notifi__title">
                                <p>You have 3 Notifications</p>
                            </div>
                            <div class="notifi__item">
                                <div class="bg-c1 img-cir img-40">
                                    <i class="zmdi zmdi-email-open"></i>
                                </div>
                                <div class="content">
                                    <p>You got a email notification</p>
                                    <span class="date">April 12, 2018 06:50</span>
                                </div>
                            </div>
                            <div class="notifi__item">
                                <div class="bg-c2 img-cir img-40">
                                    <i class="zmdi zmdi-account-box"></i>
                                </div>
                                <div class="content">
                                    <p>Your account has been blocked</p>
                                    <span class="date">April 12, 2018 06:50</span>
                                </div>
                            </div>
                            <div class="notifi__item">
                                <div class="bg-c3 img-cir img-40">
                                    <i class="zmdi zmdi-file-text"></i>
                                </div>
                                <div class="content">
                                    <p>You got a new file</p>
                                    <span class="date">April 12, 2018 06:50</span>
                                </div>
                            </div>
                            <div class="notifi__footer">
                                <a href="#">All notifications</a>
                            </div>
                        </div>
                    </div>
                    <div class="header-button-item mr-0 js-sidebar-btn lg- d-lg-none">
                        <i class="zmdi zmdi-menu"></i>
                    </div>

                </div>
            </div>
        </div>
    </div>
</header>
<aside class="menu-sidebar2 js-right-sidebar d-block d-lg-none">
    <partial name="_SideBar" />
</aside>

<script>
    function selectWallet() {
        localStorage.setItem("walletId", document.getElementById('slcWallet').value);
}
    // Function to set the option as selected based on the value in localStorage
    function onloadWallet() {
        var selectElement = document.getElementById("slcWallet");

        // Retrieve the selected value from localStorage
        var selectedValue = localStorage.getItem("walletId");

        // Loop through options and set the selected attribute
        for (var i = 0; i < selectElement.options.length; i++) {
            var option = selectElement.options[i];

            // Check if the option value matches the selected value
            if (option.value == selectedValue) {
                option.selected = true;
            } else {
                option.selected = false;
                localStorage.setItem("walletId",0);
            }
        }
    }
    onloadWallet();
</script>